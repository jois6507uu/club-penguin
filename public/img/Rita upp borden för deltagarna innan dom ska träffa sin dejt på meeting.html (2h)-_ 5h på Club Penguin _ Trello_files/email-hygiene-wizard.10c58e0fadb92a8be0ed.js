(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{5308:function(e,t,n){var a=n(5309);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5309:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._3Octy8lVZ3w2se{position:absolute;top:0;right:0;max-width:50%}._149hhP4Q8y-Frn{margin-top:30px}._149hhP4Q8y-Frn button{margin-right:8px}._18RBDTF6IgsjZi{display:inline-block}._18RBDTF6IgsjZi.O7OvO8MEgI8WMw{float:right}@media only screen and (max-width:1020px){._3Octy8lVZ3w2se{display:none}}._3Ix0WjhiPcwnS2{padding:12px;color:#5e6c84}._3Ix0WjhiPcwnS2 input{width:100%}._3Ix0WjhiPcwnS2 button{width:100%;margin:16px 0 0}.jdTcFpD3-nI6Sm{margin:16px 0 8px;font-weight:700;font-size:14px;color:#172b4d}._1NYql4rFP67pCj{margin:8px 0;font-weight:700;color:#b04632}",""]),t.locals={illustration:"_3Octy8lVZ3w2se",buttons:"_149hhP4Q8y-Frn",spinner:"_18RBDTF6IgsjZi",floating:"O7OvO8MEgI8WMw",popoverContent:"_3Ix0WjhiPcwnS2",popoverLabel:"jdTcFpD3-nI6Sm",popoverError:"_1NYql4rFP67pCj"}},5310:function(e,t,n){var a=n(5311);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5311:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._3XTAaFlVLSkqZW:focus{outline:none}._34MSBjfhRdZwkH{text-align:center}._23htW0zw7Fh0u8{background-color:#fff;border-radius:3px;overflow:hidden;position:relative;width:800px;min-height:512px;background-position-x:right;background-position-y:top;background-attachment:scroll;background-repeat:no-repeat;background-size:contain}._3f0PRaNG8v_WYf{display:flex;flex-direction:column;justify-content:center}._1bqe6MFA1Z77u_{position:absolute;top:0;right:0;z-index:1}._3u7GXQGXlz420s{margin-right:50%;padding:84px 10px 16px 56px}._1cJrvQo-iHk3oC{padding:56px}._1LktQ02-2VeLvt{padding-bottom:16px}.k24q3mQs1b7j36{color:#172b4d;font-size:24px;font-weight:600;letter-spacing:-.01em;line-height:28px;margin-top:40px;font-weight:500;margin:0}.q_QVtEzsp5HAIe{background-color:transparent;border:none;box-shadow:none;color:#172b4d;border-radius:50%}.q_QVtEzsp5HAIe:hover{background-color:rgba(9,30,66,.08);box-shadow:none}.q_QVtEzsp5HAIe:hover>span{color:#091e42!important}.q_QVtEzsp5HAIe:active{background-color:rgba(9,30,66,.13);box-shadow:none}.q_QVtEzsp5HAIe:active>span{color:#091e42!important}._3HXZB4LZrQBkoA{color:#fff;text-align:center;background-color:hsla(0,0%,100%,.1);padding:8px;margin-top:8px;border-radius:3px;font-size:12px;max-width:800px;box-sizing:border-box}._3HXZB4LZrQBkoA a{color:#fff}@media only screen and (max-width:1020px){._23htW0zw7Fh0u8{width:510px;background-image:none!important}._3u7GXQGXlz420s{margin-right:0;padding-right:56px}._2qXbPbZZZ71sPi{margin-right:0}}",""]),t.locals={wrapper:"_3XTAaFlVLSkqZW",centered:"_34MSBjfhRdZwkH",dialog:"_23htW0zw7Fh0u8",centeredDialog:"_3f0PRaNG8v_WYf",controls:"_1bqe6MFA1Z77u_",contentWithImage:"_3u7GXQGXlz420s",contentWithoutImage:"_1cJrvQo-iHk3oC",header:"_1LktQ02-2VeLvt",title:"k24q3mQs1b7j36",icon:"q_QVtEzsp5HAIe",tip:"_3HXZB4LZrQBkoA",content:"_2qXbPbZZZ71sPi"}},5312:function(e,t,n){var a=n(5313);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5313:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._1MhcKk2JrovZQ0{position:absolute;top:0;right:0;max-width:50%}._8vsZdvK9G_26e3{margin-top:30px}._8vsZdvK9G_26e3 button{margin-right:8px}@media only screen and (max-width:1020px){._1MhcKk2JrovZQ0{display:none}}",""]),t.locals={illustration:"_1MhcKk2JrovZQ0",buttons:"_8vsZdvK9G_26e3"}},5314:function(e,t,n){var a=n(5315);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5315:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._5Gv97pnlDCJV-g{position:absolute;top:0;right:0;max-width:50%}._1x64zZzP8Mz61Z{margin-top:30px}._1x64zZzP8Mz61Z button{margin-right:8px}@media only screen and (max-width:1020px){._5Gv97pnlDCJV-g{display:none}}",""]),t.locals={illustration:"_5Gv97pnlDCJV-g",buttons:"_1x64zZzP8Mz61Z"}},5316:function(e,t,n){var a=n(5317);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5317:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,".LdzHprbQluLCRz{position:absolute;top:0;right:0;max-width:50%}._3zmxQX5L53ho8O{margin-top:30px}._3zmxQX5L53ho8O button{margin-right:8px}@media only screen and (max-width:1020px){.LdzHprbQluLCRz{display:none}}._1ZvZ34YLUVLeEL strong{overflow-wrap:break-word}",""]),t.locals={illustration:"LdzHprbQluLCRz",buttons:"_3zmxQX5L53ho8O",mainMessage:"_1ZvZ34YLUVLeEL"}},5318:function(e,t,n){e.exports=n.p+"images/aa-migration-wizard/illustration-main.968c85b9654c45e45c81.svg"},5319:function(e,t,n){e.exports=n.p+"images/aa-migration-wizard/illustration-email.f5bfd1f807d345c61e4c.svg"},5320:function(e,t,n){var a=n(5321);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5321:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._2MSQJuPlNxzcnq{position:absolute;top:0;right:0;max-width:50%}._3Etz3HivVa2Zk5{margin-top:30px}._3Etz3HivVa2Zk5 button{margin-right:8px}._1T5hHwETtRj3Tm{display:inline-block}._1T5hHwETtRj3Tm._3MRtHlF2pTJIoE{float:right}@media only screen and (max-width:1020px){._2MSQJuPlNxzcnq{display:none}}._3f55SJ0Bgrj2sl{font-weight:600;margin-bottom:14px}._9a90bN-_o19zjH{margin-top:12px}.EI2cN8mmYjcC2z{color:#172b4d;font-weight:400;font-size:14px;display:inline-flex;cursor:pointer;margin-bottom:0;width:100%;flex-direction:row;align-items:center}input.VSYngck4pN55Ej{box-shadow:none;margin:0;-webkit-appearance:radio;-moz-appearance:radio;appearance:radio;display:inline-block}.XFHcjFSq0Is-sY{display:inline-block;margin-left:10px;max-width:75%;overflow-wrap:break-word}._3TZtdwCpLr20xP{font-size:12px;color:#fff;background-color:#505f79;border-radius:4px;display:inline-block;margin-left:8px;padding:1px 5px}._3zhE8NzbRC03H6{display:inline-block;margin-top:12px;color:#5e6c84}._2QC1fTDOKnM7xW{margin-left:5px}._1nSR9KYJJionLL{padding:12px;color:#5e6c84}._1nSR9KYJJionLL a{display:inline-block;margin-left:5px;color:#172b4d}._1nSR9KYJJionLL button{width:100%;margin:16px 0 0}",""]),t.locals={illustration:"_2MSQJuPlNxzcnq",buttons:"_3Etz3HivVa2Zk5",spinner:"_1T5hHwETtRj3Tm",floating:"_3MRtHlF2pTJIoE",highlightedMessage:"_3f55SJ0Bgrj2sl",emailList:"_9a90bN-_o19zjH",emailLabel:"EI2cN8mmYjcC2z",emailRadio:"VSYngck4pN55Ej",emailValue:"XFHcjFSq0Is-sY",primaryEmail:"_3TZtdwCpLr20xP",showMoreEmails:"_3zhE8NzbRC03H6",showMoreEmailsIcon:"_2QC1fTDOKnM7xW",popoverContent:"_1nSR9KYJJionLL"}},5322:function(e,t,n){var a=n(5323);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5323:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._1kfYlxui8ROGy3{position:absolute;top:0;right:0;max-width:50%}._3XQYq9mYX4B3Ue{margin-top:30px}._3XQYq9mYX4B3Ue button{margin-right:8px}._3JCflh3VaFQlZE{display:inline-block}._3JCflh3VaFQlZE._3SiiPGhC7KhlLO{float:right}@media only screen and (max-width:1020px){._1kfYlxui8ROGy3{display:none}}._1WrF7j-8jTcRuC strong{overflow-wrap:break-word}",""]),t.locals={illustration:"_1kfYlxui8ROGy3",buttons:"_3XQYq9mYX4B3Ue",spinner:"_3JCflh3VaFQlZE",floating:"_3SiiPGhC7KhlLO",mainMessage:"_1WrF7j-8jTcRuC"}},5324:function(e,t,n){var a=n(5325);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5325:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._1-a1sqQI-Z91oT{position:absolute;top:0;right:0;max-width:50%}.BIext9ryQRbBt4{margin-top:30px}.BIext9ryQRbBt4 button{margin-right:8px}._2yRoW8hK-N6IvF{display:inline-block}._2yRoW8hK-N6IvF._1_nXIP1kuszIo_{float:right}@media only screen and (max-width:1020px){._1-a1sqQI-Z91oT{display:none}}._2BIoixnIuL9BgC strong{overflow-wrap:break-word}",""]),t.locals={illustration:"_1-a1sqQI-Z91oT",buttons:"BIext9ryQRbBt4",spinner:"_2yRoW8hK-N6IvF",floating:"_1_nXIP1kuszIo_",mainMessage:"_2BIoixnIuL9BgC"}},5326:function(e,t,n){var a=n(5327);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5327:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._1mweaQbKcE7MuW{position:absolute;top:0;right:0;max-width:50%}._2VPOsy_tM57dvF{margin-top:30px}._2VPOsy_tM57dvF button{margin-right:8px}._3ydrIfjSikXRym{display:inline-block}._3ydrIfjSikXRym.kuRuh4w5gcw_V6{float:right}@media only screen and (max-width:1020px){._1mweaQbKcE7MuW{display:none}}._2J50ANpW8e-aZO{padding:16px;background-color:#fafbfc;border:2px solid #dfe1e6;margin-top:16px;margin-bottom:16px;border-radius:3px}._1ChMXJ4xMBcLkN{font-size:14px;line-height:20px;overflow-wrap:break-word}._2FTSsStl-UH4bC{color:#5e6c84;font-size:12px;line-height:16px}",""]),t.locals={illustration:"_1mweaQbKcE7MuW",buttons:"_2VPOsy_tM57dvF",spinner:"_3ydrIfjSikXRym",floating:"kuRuh4w5gcw_V6",singleEmailItem:"_2J50ANpW8e-aZO",singleEmailValue:"_1ChMXJ4xMBcLkN",singleEmailTimestamp:"_2FTSsStl-UH4bC"}},5328:function(e,t,n){var a=n(5329);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5329:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,".YxNo9pN46bRPQ2{position:absolute;top:0;right:0;max-width:50%}._1zKmhZ3mkDSKuk{margin-top:30px}._1zKmhZ3mkDSKuk button{margin-right:8px}.HvMeQqpPzz7UCs{display:inline-block}.HvMeQqpPzz7UCs._18D85L9mNV6Opx{float:right}@media only screen and (max-width:1020px){.YxNo9pN46bRPQ2{display:none}}._10SUbZGkSYwm4H{margin-bottom:18px;font-size:20px;font-weight:500}",""]),t.locals={illustration:"YxNo9pN46bRPQ2",buttons:"_1zKmhZ3mkDSKuk",spinner:"HvMeQqpPzz7UCs",floating:"_18D85L9mNV6Opx",errorMessage:"_10SUbZGkSYwm4H"}},5330:function(e,t,n){var a=n(5331);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5331:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._3x4GInExLo0xNd{position:absolute;top:0;right:0;max-width:50%}._3vJq2deHZJWJrv{margin-top:30px}._3vJq2deHZJWJrv button{margin-right:8px}._1ZXbN5V9v_yHEm{display:inline-block}._1ZXbN5V9v_yHEm._2zWN4ypN7CD4bk{float:right}@media only screen and (max-width:1020px){._3x4GInExLo0xNd{display:none}}.ae-gMVDoFT_AD4 strong{overflow-wrap:break-word}",""]),t.locals={illustration:"_3x4GInExLo0xNd",buttons:"_3vJq2deHZJWJrv",spinner:"_1ZXbN5V9v_yHEm",floating:"_2zWN4ypN7CD4bk",mainMessage:"ae-gMVDoFT_AD4"}},5332:function(e,t,n){var a=n(5333);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(22)(a,i);a.locals&&(e.exports=a.locals)},5333:function(e,t,n){(t=e.exports=n(21)(!1)).push([e.i,"._1Afz8SdJ11Curv{position:absolute;top:0;right:0;max-width:50%}.IsTLO2IuSBhwU8{margin-top:30px}.IsTLO2IuSBhwU8 button{margin-right:8px}.yFdUt7IDPmJ-DH{display:inline-block}.yFdUt7IDPmJ-DH._2fxjU1CxRuHoG9{float:right}@media only screen and (max-width:1020px){._1Afz8SdJ11Curv{display:none}}",""]),t.locals={illustration:"_1Afz8SdJ11Curv",buttons:"IsTLO2IuSBhwU8",spinner:"yFdUt7IDPmJ-DH",floating:"_2fxjU1CxRuHoG9"}},5334:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-main.f756d71fba7720da42f0.svg"},5335:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-email.f5bfd1f807d345c61e4c.svg"},5336:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-ok.918fe795af7239acb0e1.svg"},5482:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(1),o=n(14),l=n(23),c=n(5),s=n(258),u=n(767),m=n(6),p=n.n(m),d=n(34),g=n(25),f=n(936),b=n(50),h=n(5308),E=n.n(h);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=Object(c.forNamespace)(["email hygiene wizard","change email"],{shouldEscapeStrings:!1}),S=function(e){var t=e.onSubmitEmail,n=void 0===t?function(e){}:t,r=e.isSendingRequest,o=e.emailError,l=e.disabled,c=e.onTogglePopover,u=v(Object(a.useState)(""),2),m=u[0],h=u[1],S=Object(g.usePopover)({onHide:function(){c(!1)},onShow:function(){c(!0)}}),_=S.popoverProps,I=S.toggle,w=S.triggerRef;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{onClick:I,ref:w,disabled:l},x("button-text")),i.a.createElement(g.Popover,y({},_,{title:x("title")}),i.a.createElement("div",{className:E.a.popoverContent},i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(m)}},i.a.createElement("div",null,x("main-message"),r&&i.a.createElement(b.a,{small:!0,inline:!0,wrapperClassName:p()(E.a.spinner,E.a.floating)})),o&&i.a.createElement(s.a,{error:o,email:m},function(e){return i.a.createElement("p",{className:E.a.popoverError},e)}),i.a.createElement("label",{htmlFor:"email",className:E.a.popoverLabel},x("email-label")),i.a.createElement("input",{id:"email",type:"email",name:"email",value:m,ref:function(e){return e&&e.focus()},onChange:function(e){return h(e.target.value)},disabled:r}),i.a.createElement(f.a,{disabled:r||0===m.length,onClick:function(e){e.preventDefault(),n(m)}},x("send-confirmation-button"))))))},_=n(39);function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var w,C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"migrate",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(_.a.client.rest.post("members/me/atlassianAccount/migrate",{body:{returnUrl:"".concat(window.location.pathname,"?onboarding=success")}}));case 3:return e=t.sent,t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",null);case 10:case"end":return t.stop()}},null,null,[[0,7]])}}],(n=null)&&I(t.prototype,n),a&&I(t,a),e}(),k=function(e){var t={};return e.organizationId&&(t.enterprise={id:e.organizationId}),{attributes:{},containers:t}},O=n(12),N=n(5310),j=n.n(N),R=function(e){var t=e.title,n=e.tip,r=e.children,o=e.closeDialog,l=e.isCentered,c=e.image,s=e.onKeyPressCapture,u=Object(a.useRef)(null);return Object(a.useEffect)(function(){u.current&&c&&u.current.appendChild(c)}),i.a.createElement("div",{tabIndex:0,ref:function(e){return e&&e.focus()},className:p()(j.a.wrapper,l?j.a.centered:void 0),onKeyPressCapture:s},i.a.createElement("div",{ref:u,className:p()(j.a.dialog,l?j.a.centeredDialog:void 0)},i.a.createElement("div",{className:j.a.controls},i.a.createElement(d.e,{icon:O.IconName.Close,className:j.a.icon,color:O.IconColor.Dark,largeIcon:!0,onClick:o})),i.a.createElement("div",{className:c?j.a.contentWithImage:j.a.contentWithoutImage},i.a.createElement("header",{className:j.a.header},i.a.createElement("h2",{className:j.a.title},t)),i.a.createElement("div",null,r))),n&&i.a.createElement("div",{className:j.a.tip},i.a.createElement("span",{role:"img","aria-label":"tip"},"ðŸ’¡"),i.a.createElement("span",null,n)))},A=n(5312),L=n.n(A),M=Object(c.forNamespace)(["aa migration wizard","in app migration","create"],{shouldEscapeStrings:!1}),z=Object(c.forNamespace)(["aa migration wizard","in app migration","login"],{shouldEscapeStrings:!1}),H=function(e){var t=e.closeDialog,n=e.image,a=e.migrationUrl,r=e.aaExists,o=e.onKeyPressCapture,l=r?z:M;return i.a.createElement(R,{title:l("title"),tip:i.a.createElement(i.a.Fragment,null,l("tip-text",{jiraLink:i.a.createElement("a",{href:"https://www.atlassian.com/software/jira",key:"jira-link",target:"_blank"},"Jira"),confluenceLink:i.a.createElement("a",{href:"https://www.atlassian.com/software/confluence",key:"confluence-link",target:"_blank"},"Confluence")})),closeDialog:t,isCentered:!1,image:n,onKeyPressCapture:o},i.a.createElement("p",null,l("main-message")),i.a.createElement("p",null,l("secondary-message")),i.a.createElement("div",{className:L.a.buttons},i.a.createElement(d.g,{onClick:function(){return window.location.href=a}},l("button-text"))))},D=n(5314),T=n.n(D),P=n(5316),Z=n.n(P),B=Object(c.forNamespace)(["aa migration wizard","email migration"],{shouldEscapeStrings:!1}),F=function(e){var t=e.email,n=e.closeDialog,a=e.changeEmailButton,r=e.image;return i.a.createElement(R,{closeDialog:n,title:B("title"),image:r},i.a.createElement("p",{className:Z.a.mainMessage},B("main-message",{email:i.a.createElement("strong",{key:"email"},t)})),i.a.createElement("p",null,B("secondary-message")),i.a.createElement("div",{className:Z.a.buttons},i.a.createElement(d.g,{onClick:n},B("button-text")),a))},Q={main:n(5318),email:n(5319)};!function(e){e.LOG_IN="logIn",e.CREATE_ACCOUNT="createAccount",e.CHECK_INBOX="checkInbox"}(w||(w={}));var V=new Map,W=function(e){var t=V.get(e);if(t)return t;var n,a,i=document.createElement("div");return i.className=T.a.illustration,V.set(e,i),(n=e,regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(window.fetch(n));case 2:if(!(null==(a=e.sent)?void 0:a.ok)){e.next=5;break}return e.abrupt("return",a.text());case 5:case"end":return e.stop()}})).then(function(e){e&&(i.innerHTML=e)}),i},J=function(e){switch(e){case w.CHECK_INBOX:return o.Source.aaMigrationWizardCheckInboxScreen;case w.CREATE_ACCOUNT:return o.Source.aaMigrationWizardCreateScreen;case w.LOG_IN:return o.Source.aaMigrationWizardLogInScreen;default:return o.Source.unknown}},q=function(e){var t=e.email,n=e.changeEmailButton,l=e.onDismiss,c=e.analyticsContext,s=e.migrationResponse,u=e.getSource,m=void 0===u?J:u;Object(a.useEffect)(function(){W(Q.main),W(Q.email)});var p=s.aaExists?w.LOG_IN:s.emailVerificationRequired?w.CHECK_INBOX:w.CREATE_ACCOUNT,d=m(p);Object(a.useEffect)(function(){!function(e,t){Object(r.trackUe)({category:r.Noun.AA_MIGRATION_WIZARD,verb:r.Verb.VIEWS,directObj:e,context:JSON.stringify(t)});var n=k(t),a=n.attributes,i=n.containers;o.Analytics.sendScreenEvent({name:e,attributes:a,containers:i})}(d,c)},[d,c]);var g=Object(a.useCallback)(function(){l(),function(e){var t=e.verb,n=e.noun,a=e.method,i=e.context,l=e.actionSubject,c=e.actionSubjectId,s=e.action,u=e.source;Object(r.trackUe)({category:r.Noun.AA_MIGRATION_WIZARD,verb:t,directObj:n,method:a,context:JSON.stringify(i)});var m=k(i),p=m.attributes,d=m.containers;o.Analytics.sendUIEvent({action:s,actionSubject:l,actionSubjectId:c,source:u,attributes:p,containers:d})}({verb:r.Verb.DISMISSES,noun:r.Noun.AA_MIGRATION_WIZARD,method:"by dismissing the migration dialog",context:c,source:d,action:o.Action.closed,actionSubject:o.ActionSubject.overlay,actionSubjectId:o.ActionSubjectId.emailHygieneWizard})},[l,d,c]);switch(p){case w.LOG_IN:case w.CREATE_ACCOUNT:return i.a.createElement(H,{closeDialog:g,aaExists:s.aaExists,migrationUrl:s.redirect_url,image:W(Q.main)});case w.CHECK_INBOX:return i.a.createElement(F,{email:t,changeEmailButton:n,closeDialog:g,image:W(Q.email)});default:return null}},G=n(35),K=Object(c.forNamespace)(["email hygiene wizard","dialog"],{shouldEscapeStrings:!1}),X=function(e){var t=e.title,n=e.children,l=e.closeDialog,c=e.isCentered,s=e.image,m=e.onKeyPressCapture,p=e.analyticsContext,d=e.analyticsSource,g=Object(a.useCallback)(function(){Object(u.a)({action:o.Action.clicked,actionSubject:o.ActionSubject.link,actionSubjectId:o.ActionSubjectId.emailHygieneTransferBoardsFooterLink,method:"by clicking the transfer boards link",noun:r.Noun.LINK,source:d,verb:r.Verb.CLICKS,context:p})},[d,p]),f=Object(a.useCallback)(function(){l(),Object(u.a)({verb:r.Verb.DISMISSES,noun:r.Noun.EMAIL_HYGIENE_WIZARD,method:"by manually closing the dialog",context:p,source:d,action:o.Action.closed,actionSubject:o.ActionSubject.overlay,actionSubjectId:o.ActionSubjectId.emailHygieneWizard})},[l,d,p]);return i.a.createElement(R,{title:t,tip:i.a.createElement(i.a.Fragment,null,K("tip-text",{transferYourBoardsLink:i.a.createElement("a",{href:"/support/transfer-boards",key:"transfer-link",onClick:g,target:"_blank"},K("transfer-your-boards-link"))})),closeDialog:f,isCentered:c,image:s,onKeyPressCapture:m},n)},U=n(5320),Y=n.n(U);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var te=Object(c.forNamespace)(["email hygiene wizard","choose email screen"],{shouldEscapeStrings:!1}),ne=function(e){var t=e.logins,n=e.updateByMonth,l=e.onDismiss,c=e.selectedLogin,s=e.isSendingRequest,m=e.isSendingRemoveEmailsRequest,f=e.onSelectLogin,h=e.onClickConfirm,E=e.onRemoveSecondaryEmails,y=e.image,v=e.analyticsContext,x=e.analyticsSource,S=ee(Object(a.useState)(!1),2),_=S[0],I=S[1],w=Object(g.usePopover)({onShow:function(){Object(u.b)(o.Source.emailHygieneRemoveSecondaryEmailsInlineDialog,v)}}),C=w.popoverProps,k=w.toggle,O=w.triggerRef,N=Object(a.useCallback)(function(){E(),Object(u.a)({verb:r.Verb.REMOVES,noun:r.Noun.EMAIL,method:"by clicking remove secondary emails button",context:v,source:o.Source.emailHygieneRemoveSecondaryEmailsInlineDialog,action:o.Action.clicked,actionSubject:o.ActionSubject.button,actionSubjectId:o.ActionSubjectId.emailHygieneWizardRemoveSecondaryEmailsButton})},[E,v]),j=_||t.length<=5?t:t.slice(0,4),R=t.length-j.length;return i.a.createElement(X,{closeDialog:l,title:te("title"),image:y,onKeyPressCapture:function(e){"Enter"!==e.key||s||C.isVisible||h()},analyticsContext:v,analyticsSource:x},i.a.createElement("p",{className:Y.a.highlightedMessage},te("main-message",{updateByMonth:n})),i.a.createElement("p",null,te("select-email-text")),i.a.createElement("div",{className:Y.a.emailList},j.map(function(e,t){return i.a.createElement("div",{key:"email".concat(t)},i.a.createElement("label",{className:Y.a.emailLabel},i.a.createElement("input",{type:"radio",className:Y.a.emailRadio,disabled:s||m,checked:!!c&&e.email===c.email,onChange:function(){return f(e)}}),i.a.createElement("span",{className:Y.a.emailValue},e.email),e.primary&&i.a.createElement("span",{className:Y.a.primaryEmail},te("primary-label"))))}),R>0&&i.a.createElement("div",null,i.a.createElement("a",{href:"#",className:Y.a.showMoreEmails,onClick:function(e){e.preventDefault(),I(!0)}},te("show-more-link",{amount:R}),i.a.createElement(G.default,{name:G.IconName.Down,small:!0,className:Y.a.showMoreEmailsIcon})))),i.a.createElement("div",{className:Y.a.buttons},i.a.createElement(d.g,{disabled:s||m,onClick:h},te("continue-button")),i.a.createElement(d.a,{onClick:k,disabled:s,ref:O},te("use-different-email")),i.a.createElement(g.Popover,$({},C,{title:te("use-different-email")}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Y.a.popoverContent},te("remove-secondary-addresses-text"),i.a.createElement("a",{href:"https://help.trello.com/article/773-adding-account-credentials",target:"_blank"},te("remove-secondary-addresses-link-text")),m&&i.a.createElement(b.a,{small:!0,inline:!0,wrapperClassName:p()(Y.a.spinner,Y.a.floating)}),i.a.createElement(d.g,{onClick:N,disabled:m},te("remove-secondary-addresses-button"))))),s&&i.a.createElement(b.a,{small:!0,wrapperClassName:Y.a.spinner})))},ae=n(5322),ie=n.n(ae),re=Object(c.forNamespace)(["email hygiene wizard","claimable info screen"],{shouldEscapeStrings:!1}),oe=function(e){var t=e.email,n=e.isSendingRequest,a=e.onDismiss,r=e.onClickConfirm,o=e.onClickBack,l=e.image,c=e.analyticsContext,s=e.analyticsSource;return i.a.createElement(X,{closeDialog:a,title:re("title"),image:l,onKeyPressCapture:function(e){"Enter"!==e.key||n||r()},analyticsContext:c,analyticsSource:s},i.a.createElement("p",{className:ie.a.mainMessage},re("main-message",{domain:i.a.createElement("strong",{key:"domain"},t.split("@")[1])})),i.a.createElement("p",null,re("secondary-message",{transferYourBoardsLink:i.a.createElement("a",{href:"/support/transfer-boards",key:"transfer-link",target:"_blank"},re("transfer-your-boards-link"))})),i.a.createElement("div",{className:ie.a.buttons},i.a.createElement(d.g,{onClick:r,disabled:n},re("use-email-button")),i.a.createElement(d.a,{onClick:o,disabled:n},re("different-email-button")),n&&i.a.createElement(b.a,{small:!0,inline:!0,wrapperClassName:ie.a.spinner})))},le=n(5324),ce=n.n(le),se=Object(c.forNamespace)(["email hygiene wizard","confirmation email sent screen"],{shouldEscapeStrings:!1}),ue=function(e){var t=e.email,n=e.onDismiss,a=e.changeEmailButton,r=e.image,o=e.analyticsContext,l=e.analyticsSource;return i.a.createElement(X,{closeDialog:n,title:se("title"),image:r,analyticsContext:o,analyticsSource:l},i.a.createElement("p",{className:ce.a.mainMessage},se("main-message",{email:i.a.createElement("strong",{key:"email"},t)})),i.a.createElement("p",null,se("secondary-message")),i.a.createElement("div",{className:ce.a.buttons},i.a.createElement(d.g,{onClick:n},se("ok-button")),a))},me=n(105),pe=n(939),de=n(5326),ge=n.n(de),fe=Object(c.forNamespace)(["email hygiene wizard","confirm single email screen"],{shouldEscapeStrings:!1}),be=function(e){var t=e.login,n=e.isSendingRequest,r=e.isSendingNewEmailRequest,l=e.isPopoverShown,c=e.onDismiss,s=e.onClickConfirm,m=e.changeEmailButton,p=e.image,g=e.analyticsContext,f=e.analyticsSource;return Object(a.useEffect)(function(){l&&Object(u.b)(o.Source.emailHygieneChangeEmailInlineDialog,g)},[l,g]),i.a.createElement(X,{closeDialog:c,title:fe("title"),image:p,onKeyPressCapture:function(e){"Enter"!==e.key||n||l||s()},analyticsContext:g,analyticsSource:f},fe("main-message"),i.a.createElement("div",{className:ge.a.singleEmailItem},i.a.createElement("div",{className:ge.a.singleEmailValue},t.email),i.a.createElement("div",{className:ge.a.singleEmailTimestamp},fe("added-date",{date:Object(pe.a)(Object(me.c)(t.id),new Date)}))),i.a.createElement("div",{className:ge.a.buttons},i.a.createElement(d.g,{onClick:s,disabled:n||r},fe("use-email-button")),m,n&&i.a.createElement(b.a,{small:!0,inline:!0,wrapperClassName:ge.a.spinner})))},he=n(5328),Ee=n.n(he),ye=Object(c.forNamespace)(["email hygiene wizard","error screen"],{shouldEscapeStrings:!1}),ve=function(e){var t=e.onDismiss,n=e.onClickBack,a=e.image,r=e.analyticsContext,o=e.analyticsSource;return i.a.createElement(X,{closeDialog:t,title:ye("title"),image:a,isCentered:!0,analyticsContext:r,analyticsSource:o},i.a.createElement("h3",{className:Ee.a.errorMessage},ye("main-message")),i.a.createElement("p",null,ye("secondary-message")),i.a.createElement("div",{className:Ee.a.buttons},i.a.createElement(d.g,{onClick:n},ye("start-over-button"))))},xe=n(5330),Se=n.n(xe),_e=Object(c.forNamespace)(["email hygiene wizard","success screen"],{shouldEscapeStrings:!1}),Ie=function(e){var t=e.email,n=e.onDismiss,a=e.image,r=e.analyticsContext,o=e.analyticsSource;return i.a.createElement(X,{closeDialog:n,title:_e("title"),image:a,analyticsContext:r,analyticsSource:o},i.a.createElement("p",{className:Se.a.mainMessage},_e("main-message",{email:i.a.createElement("strong",{key:"email"},t)})),i.a.createElement("p",null,_e("secondary-message",{yourProfileLink:i.a.createElement("a",{href:"/me",key:"profile-link"},_e("your-profile-link"))})),i.a.createElement("div",{className:Se.a.buttons},i.a.createElement(d.g,{onClick:n},_e("done-button"))))},we=n(5332),Ce=n.n(we);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(n,!0).forEach(function(t){Ne(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"illustrations",function(){return Ae}),n.d(t,"ScreenType",function(){return Re}),n.d(t,"fetchIllustration",function(){return ze}),n.d(t,"EmailHygieneWizard",function(){return He});var Re,Ae={main:n(5334),email:n(5335),success:n(5336)};!function(e){e.CHOOSE_EMAIL="chooseEmail",e.CONFIRM_SINGLE_EMAIL="confirmSingleEmail",e.CONFIRMATION_EMAIL_SENT="confirmationEmailSent",e.CLAIMABLE_INFO="claimableInfo",e.SUCCESS="success",e.ERROR="error",e.MIGRATION="migration"}(Re||(Re={}));var Le=Object(c.forNamespace)(["email hygiene wizard","dialog"],{shouldEscapeStrings:!1}),Me=new Map,ze=function(e,t,n){var a="".concat(e,"-").concat(t||"","-").concat(n||""),i=Me.get(a);if(i)return i;var r,o,l=document.createElement("div");return l.className=Ce.a.illustration,Me.set(a,l),(r=e,regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(window.fetch(r));case 2:if(!(null==(o=e.sent)?void 0:o.ok)){e.next=5;break}return e.abrupt("return",o.text());case 5:case"end":return e.stop()}})).then(function(e){e&&(l.innerHTML=e,function(e,t,n){var a=e.querySelector(".replace-avatar");if(n)a&&a.setAttribute("xlink:href","".concat(n,"/170.png"));else{if(t){var i=e.querySelector(".replace-initials");i&&(i.innerHTML=t)}a&&a.remove()}}(l,t,n))}),l},He=function(e){var t=e.analyticsContext,n=e.name,c=e.avatarUrl,m=e.initials,p=e.logins,d=e.updateByMonth,g=e.onComplete,f=e.onDismiss,b=je(Object(a.useState)(null),2),h=b[0],E=b[1],y=je(Object(a.useState)(!1),2),v=y[0],x=y[1],_=je(Object(a.useState)(Re.CHOOSE_EMAIL),2),I=_[0],w=_[1],k=je(Object(a.useState)(s.b.None),2),O=k[0],N=k[1],j=je(Object(a.useState)(),2),R=j[0],A=j[1],L=je(Object(a.useState)(""),2),M=L[0],z=L[1],H=!!R,D=Object(a.useCallback)(function(e){return ze(e,m,c)},[m,c]);Object(a.useEffect)(function(){D(Ae.main),D(Ae.email),D(Ae.success)}),Object(a.useEffect)(function(){if(!H){var e=p.find(function(e){return e.primary})||p[0];A(e)}},[H,p]);var T=je(Object(l.Mb)(),2),P=T[0],Z=T[1],B=je(Object(l.Mb)(),2),F=B[0],Q=B[1],V=je(Object(l.W)(),2),W=V[0],J=V[1],G=je(Object(a.useState)(!1),2),K=G[0],X=G[1],U=I;U!==Re.CHOOSE_EMAIL&&U!==Re.CONFIRM_SINGLE_EMAIL||(U=p.length>1?Re.CHOOSE_EMAIL:Re.CONFIRM_SINGLE_EMAIL);var Y=function(e){switch(e){case Re.CHOOSE_EMAIL:return o.Source.emailHygieneChooseEmailScreen;case Re.CLAIMABLE_INFO:return o.Source.emailHygieneClaimableWarningScreen;case Re.CONFIRMATION_EMAIL_SENT:return o.Source.emailHygieneConfirmationSentScreen;case Re.CONFIRM_SINGLE_EMAIL:return o.Source.emailHygieneConfirmEmailScreen;case Re.MIGRATION:return o.Source.emailHygieneAaMigrationScreen;case Re.ERROR:return o.Source.emailHygieneErrorScreen;case Re.SUCCESS:return o.Source.emailHygieneThanksScreen;default:return o.Source.unknown}}(U);Object(a.useEffect)(function(){Object(u.b)(Y,t)},[Y,t]);var $=function(e){A(e),Object(u.a)({verb:r.Verb.SETS,noun:r.Noun.EMAIL,method:"by selecting the email from a list",context:t,source:Y,action:o.Action.clicked,actionSubject:o.ActionSubject.radioButton,actionSubjectId:o.ActionSubjectId.emailHygieneWizardEmailItem})},ee=Object(a.useCallback)(function(){g(),Object(u.a)({verb:r.Verb.COMPLETES,noun:r.Noun.EMAIL_HYGIENE_WIZARD,method:"by dismissing the final screen",context:t,source:Y,action:o.Action.closed,actionSubject:o.ActionSubject.overlay,actionSubjectId:o.ActionSubjectId.emailHygieneWizard})},[g,Y,t]),te=function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.next=3,regeneratorRuntime.awrap(C.migrate());case 3:(e=t.sent)?(E(e),w(Re.MIGRATION)):w(Re.SUCCESS),x(!1);case 6:case"end":return t.stop()}})},ae=function(){if(!R)throw new Error("No email selected");var e=p.filter(function(e){return e.id!==R.id}).map(function(e){return e.id});P({variables:{memberId:"me",primaryLoginId:R.id,removeLoginIds:e,markAsComplete:!0}}).then(te,function(){return w(Re.ERROR)})},ie=function(){if(!R)throw new Error("No email selected");R.claimable?w(Re.CLAIMABLE_INFO):ae()},re=Z.loading||v,le=i.a.createElement(S,{disabled:re,onTogglePopover:X,isSendingRequest:J.loading,onSubmitEmail:function(e){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(R){i.next=2;break}throw new Error("No email selected");case 2:return N(s.b.None),i.prev=3,i.next=6,regeneratorRuntime.awrap(W({variables:{loginId:R.id,email:e}}));case 6:z(e),w(Re.CONFIRMATION_EMAIL_SENT),i.next=15;break;case 10:i.prev=10,i.t0=i.catch(3),n=i.t0.networkError?i.t0.networkError.message:i.t0.message,(a=Object(s.c)(n))?N(a):w(Re.ERROR);case 15:Object(u.a)({verb:r.Verb.CHANGES,noun:r.Noun.EMAIL,method:"by clicking change email button",context:Oe({},t,{dialogScreen:Y}),source:o.Source.emailHygieneChangeEmailInlineDialog,action:o.Action.clicked,actionSubject:o.ActionSubject.button,actionSubjectId:o.ActionSubjectId.emailHygieneWizardChangeEmailButton});case 16:case"end":return i.stop()}},null,null,[[3,10]])},emailError:O},Le("change-email"));switch(U){case Re.CHOOSE_EMAIL:return i.a.createElement(ne,{name:n,image:D(Ae.main),onDismiss:f,logins:p,updateByMonth:d,isSendingRequest:re,onClickConfirm:ie,selectedLogin:R,onSelectLogin:$,isSendingRemoveEmailsRequest:Q.loading,onRemoveSecondaryEmails:function(){if(!R)throw new Error("No email selected");var e=p.filter(function(e){return e.id!==R.id}).map(function(e){return e.id});F({variables:{memberId:"me",primaryLoginId:R.id,removeLoginIds:e,markAsComplete:!1}}).then(function(){return w(Re.CONFIRM_SINGLE_EMAIL)},function(){return w(Re.ERROR)})},analyticsContext:t,analyticsSource:Y});case Re.CONFIRM_SINGLE_EMAIL:return i.a.createElement(be,{name:n,image:D(Ae.main),onDismiss:f,isSendingRequest:re,isSendingNewEmailRequest:J.loading,isPopoverShown:K,onSelectLogin:$,login:p[0],onClickConfirm:ie,changeEmailButton:le,analyticsContext:t,analyticsSource:Y});case Re.CLAIMABLE_INFO:return i.a.createElement(oe,{image:D(Ae.main),onDismiss:f,isSendingRequest:re,email:R.email,onClickConfirm:ae,onClickBack:function(){return w(Re.CHOOSE_EMAIL)},analyticsContext:t,analyticsSource:Y});case Re.CONFIRMATION_EMAIL_SENT:return i.a.createElement(ue,{image:D(Ae.email),onDismiss:ee,changeEmailButton:le,email:M,analyticsContext:t,analyticsSource:Y});case Re.ERROR:return i.a.createElement(ve,{onDismiss:f,onClickBack:function(){return w(Re.CHOOSE_EMAIL)},analyticsContext:t,analyticsSource:Y});case Re.SUCCESS:return i.a.createElement(Ie,{image:D(Ae.success),onDismiss:ee,email:R.email,analyticsContext:t,analyticsSource:Y});case Re.MIGRATION:return h&&i.a.createElement(q,{onDismiss:g,changeEmailButton:le,email:R.email,analyticsContext:t,migrationResponse:h});default:return null}};t.default=He}}]);
//# sourceMappingURL=email-hygiene-wizard.10c58e0fadb92a8be0ed.js.map