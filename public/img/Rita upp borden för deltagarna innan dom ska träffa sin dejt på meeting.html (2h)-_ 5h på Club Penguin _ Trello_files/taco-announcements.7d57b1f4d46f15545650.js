(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{4948:function(e,n,t){e.exports=t.p+"images/TinyTacoTalking.1b4043f492b914f4b1f3.png"},5410:function(e,n,t){var r=t(5411);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(22)(r,a);r.locals&&(e.exports=r.locals)},5411:function(e,n,t){var r=t(181);(n=e.exports=t(21)(!1)).push([e.i,"._32kNZW8b-DAcUd{position:relative}._22FfAlSrF_UZ8Z{color:#fff;display:block;outline:none;overflow:hidden;height:35px;width:360px;position:absolute;margin:0 0 0 8px}._22FfAlSrF_UZ8Z,._22FfAlSrF_UZ8Z:active,._22FfAlSrF_UZ8Z:focus,._22FfAlSrF_UZ8Z:hover{background:none;box-shadow:none}._3jloUsx0g9Z36M{background-image:url("+r(t(4948))+");background-size:33px 41px;display:block;height:40px;left:0;position:absolute;top:15px;transition:top 85ms ease-in,margin 85ms ease-in;width:33px}._2RnAxr92Bm6oXT{border-right:7px solid #519839;border-top:7px solid transparent;border-bottom:7px solid transparent;height:0;left:-7px;position:absolute;top:8px;transition:border-right-color 85ms ease-in;width:0}._2RnAxr92Bm6oXT.KlwbSPINsw9r3p{border-right-color:#b04632}._1EtGuMT1gmti5W{background-color:#519839;border-radius:3px;line-height:18px;padding:6px 8px;position:absolute;left:43px;top:40px;transition:top 85ms ease-in,background-color 85ms ease-in;white-space:nowrap;z-index:1}._1EtGuMT1gmti5W.KlwbSPINsw9r3p{background-color:#b04632}._3tQj9ncxDOdMBH{display:none}._3tQj9ncxDOdMBH ._1EtGuMT1gmti5W,._3tQj9ncxDOdMBH ._3jloUsx0g9Z36M{top:40px}._-25sWA3x_41m4b ._3jloUsx0g9Z36M{top:15px}._-25sWA3x_41m4b ._1EtGuMT1gmti5W{top:40px}._981fN1wvDyTPLu ._1EtGuMT1gmti5W,._981fN1wvDyTPLu ._3jloUsx0g9Z36M,._-25sWA3x_41m4b:hover ._1EtGuMT1gmti5W,._-25sWA3x_41m4b:hover ._3jloUsx0g9Z36M{top:0}@media only screen and (min-width:751px) and (max-width:900px){._22FfAlSrF_UZ8Z{width:40px}._1EtGuMT1gmti5W{display:none}}@media only screen and (max-width:750px){._22FfAlSrF_UZ8Z{display:none}}._4pZ-8-UuIIBCzH{max-height:311px;overflow-x:hidden;overflow-y:auto}",""]),n.locals={container:"_32kNZW8b-DAcUd",button:"_22FfAlSrF_UZ8Z",rooIcon:"_3jloUsx0g9Z36M",leftArrow:"_2RnAxr92Bm6oXT",rooAlert:"KlwbSPINsw9r3p",rooText:"_1EtGuMT1gmti5W",rooHidden:"_3tQj9ncxDOdMBH",rooCrouch:"_-25sWA3x_41m4b",rooUp:"_981fN1wvDyTPLu",popoverContent:"_4pZ-8-UuIIBCzH"}},5412:function(e,n,t){var r=t(5413);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(22)(r,a);r.locals&&(e.exports=r.locals)},5413:function(e,n,t){(n=e.exports=t(21)(!1)).push([e.i,".HDLVBVBs4mWoi_{padding:4px;margin-bottom:4px;border-bottom:1px solid rgba(9,30,66,.13)}._1P-KdP3fUGy5Tm h3,._1P-KdP3fUGy5Tm p{margin:0 0 8px}.yRMsF6kWI-BjMg,.yRMsF6kWI-BjMg a{color:#5e6c84}.yRMsF6kWI-BjMg a:not(._38uVdHlQFmBXme):hover{color:#172b4d}._2fHYSG3WrmntS6{background-color:#e9e9e9}._2vPLkoBnm0rqqz{text-decoration:none}._2vPLkoBnm0rqqz:hover{text-decoration:underline}",""]),n.locals={announcement:"HDLVBVBs4mWoi_","announcement-blog":"_1P-KdP3fUGy5Tm",quiet:"yRMsF6kWI-BjMg",disabled:"_38uVdHlQFmBXme","announcement-downtime":"_2fHYSG3WrmntS6",announcementHeaderLink:"_2vPLkoBnm0rqqz"}},5414:function(e,n,t){var r=t(5415);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(22)(r,a);r.locals&&(e.exports=r.locals)},5415:function(e,n,t){(n=e.exports=t(21)(!1)).push([e.i,"._107oe4ZASY431q{margin:10px 0 0}._3bTQ6o9FGX-JMG{margin:0 4px 5px}._1zsA1NHze3_bvl{border-radius:3px;color:#5e6c84;display:block;float:left;height:20px;font-size:16px;font-weight:700;line-height:20px;padding:10px 10px 10px 36px;position:relative;text-align:center}._1zsA1NHze3_bvl:hover{background-color:#dfe1e6;color:#172b4d}._9Va-yAzdy_0oN{position:absolute;top:5px;left:5px}._3WbMJMgB2ZAGoJ{border-radius:3px;display:block;float:left;height:30px;padding:5px 8px;text-align:center}._3WbMJMgB2ZAGoJ:hover{background-color:#dfe1e6}",""]),n.locals={footerLinks:"_107oe4ZASY431q",footerMessage:"_3bTQ6o9FGX-JMG",blogLink:"_1zsA1NHze3_bvl",blogIcon:"_9Va-yAzdy_0oN",socialMediaLink:"_3WbMJMgB2ZAGoJ"}},5484:function(e,n,t){"use strict";t.r(n);var r,a,o=t(0),i=t.n(o),c=t(25),l=t(1),u=t(24),s=t(66),m=parseInt(u.Storage.get("tacoTimeMs")),p=30*(isNaN(m)?1e3:m),f=2*p,d=10*f,b=60*f;!function(e){e.Up="up",e.Crouched="crouched",e.Hidden="hidden"}(r||(r={})),function(e){e.Normal="normal",e.Maintenance="maintenance"}(a||(a={}));var g=function(e){return"announcement-".concat(e,"-read")},h=function(e){return!u.Storage.get(g(e))};function v(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _="tacoShow-".concat(s.currentLocale),y=function(){var e=parseInt(u.Storage.get(_));return!(e&&!isNaN(e))||Date.now()>e},x=function(){var e=v(Object(o.useState)(!y()),2),n=e[0],t=e[1];Object(o.useEffect)(function(){var e=setInterval(function(){y()?(t(!1),u.Storage.unset(_)):t(!0)},p);return function(){return clearInterval(e)}},[]);return[n,function(){var e;e=Date.now()+b,u.Storage.set(_,e.toString()),t(!0)}]};function N(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var A=t(23);function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var j=function(){var e=w(Object(o.useState)(a.Normal),2),n=e[0],t=e[1],r=w(Object(o.useState)([]),2),i=r[0],c=r[1],l=Object(A.l)({pollInterval:d}).data;return Object(o.useEffect)(function(){var e,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(function(e){return Object(s.matches)(e.locale,s.currentLocale)&&h(e.id)})}(null!==(e=null==l?void 0:l.announcements)&&void 0!==e?e:[]);n!==a.Maintenance&&t(r.filter(function(e){return e.type===A.a.Downtime}).length>0?a.Maintenance:a.Normal),c(r)},[l,n]),{unreadAnnouncements:i,tacoStyle:n,resetUnreadAnnouncements:function(){c([])}}},E=t(5410),k=t.n(E),S=t(6),O=t.n(S),M=t(5),T=t(5412),I=t.n(T);function U(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var P=Object(M.forTemplate)("announcement"),Z=function(e){var n;return U(n={},I.a.announcement,!0),U(n,I.a["announcement-".concat(e)],!!e),n},B=function(){Object(l.trackUe)({category:l.Noun.HEADER,verb:l.Verb.OPENS,directObj:l.Noun.LANDING_TAB,context:{landingtab:"Opened Announcement Link"}})},H=function(e){var n=e.url,t=e.title,r=e.html,a=e.type;return i.a.createElement("div",{className:O()(Z(a))},i.a.createElement("h3",{className:I.a.announcementHeader},n?i.a.createElement("a",{className:I.a.announcementHeaderLink,href:n,target:"_blank",rel:"noopener noreferrer",onClick:B},t):t),i.a.createElement("p",{dangerouslySetInnerHTML:{__html:r}}),n&&i.a.createElement("p",{className:I.a.quiet},i.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},P("read-more-ellipsis"))))},L=t(35),F=t(5414),W=t.n(F),D=Object(M.forTemplate)("header_announcements"),G=Object(M.forNamespace)("social"),C=function(e){return function(){Object(l.trackUe)({category:l.Noun.HEADER,verb:l.Verb.OPENS,directObj:l.Noun.LANDING_TAB,context:{landingTab:e}})}},z=function(e){var n=e.highlightedUrl,t=new URL(G("blog"));if(t.searchParams.append("utm_campaign","none"),t.searchParams.append("utm_source","direct"),t.searchParams.append("utm_medium","inapp"),n){var r=new URL(n);if(r.host.includes("blog.trello.com")){if(r.searchParams.has("utm_campaign"))t.searchParams.set("utm_campaign",r.searchParams.get("utm_campaign"));else{var a=r.pathname.split("/");a.length>0&&t.searchParams.set("utm_campaign",a[a.length-1])}r.searchParams.has("utm_source")&&t.searchParams.set("utm_source",r.searchParams.get("utm_source"))}}return i.a.createElement("footer",{className:W.a.footerLinks},i.a.createElement("p",{className:O()(W.a.quiet,W.a.footerMessage)},D("for-more-updates-check-out-ellipsis")),i.a.createElement("a",{className:W.a.blogLink,target:"_blank",rel:"noopener noreferrer",href:t.toString(),onClick:C("blog")},i.a.createElement(L.default,{className:W.a.blogIcon,name:L.IconName.Board,large:!0}),i.a.createElement("span",{className:W.a.underline},D("trello-blog"))),i.a.createElement("a",{className:W.a.socialMediaLink,target:"_blank",rel:"noopener noreferrer",href:G("twitter"),onClick:C("twitter")},i.a.createElement(L.default,{name:L.IconName.Twitter,large:!0})),i.a.createElement("a",{className:W.a.socialMediaLink,target:"_blank",rel:"noopener noreferrer",href:G("facebook"),onClick:C("facebook")},i.a.createElement(L.default,{name:L.IconName.Facebook,large:!0})),i.a.createElement("a",{className:W.a.socialMediaLink,target:"_blank",rel:"noopener noreferrer",href:G("instagram"),onClick:C("instagram")},i.a.createElement(L.default,{name:L.IconName.Instagram,large:!0})))};function R(){return(R=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function V(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var q=function(e){var n,t,r=e.announcements,a=e.onDismissAnnouncements,c=Object(A.l)({variables:{filter:"all"},fetchPolicy:"cache-and-network"}).data,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=e.map(function(e){return e.id}),r=n.filter(function(e){return Object(s.matches)(e.locale,s.currentLocale)&&!t.includes(e.id)});return e.concat(r)}(r,null!==(n=null==c?void 0:c.announcements)&&void 0!==n?n:[]),p=V(Object(A.S)(),1)[0];return Object(o.useEffect)(function(){var e;regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!((e=m.reduce(function(e,n){var t;return h(n.id)&&(t=n.id,u.Storage.set(g(t),"true"),Object(l.trackUe)({category:l.Noun.ANNOUNCEMENTS,verb:l.Verb.DISMISSES,directObj:l.Noun.ANNOUNCEMENTS}),e.push(p({variables:{announcementId:n.id}}))),e},[])).length>0)){n.next=5;break}return n.next=4,regeneratorRuntime.awrap(Promise.all(e));case 4:a();case 5:case"end":return n.stop()}})},[m,p,a]),i.a.createElement(i.a.Fragment,null,m.map(function(e){return i.a.createElement(H,R({key:e.id},e))}),i.a.createElement(z,{highlightedUrl:null===(t=m[0])||void 0===t?void 0:t.url}))};function J(){return(J=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Q(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function X(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.d(n,"TacoAnnouncements",function(){return $});var K=Object(M.forNamespace)("announcements"),Y=Object(M.forNamespace)("view title"),$=function(){var e,n,u,s,m,p,f,d=Object(c.usePopover)(),b=d.popoverProps,g=d.triggerRef,h=d.toggle,v=(s=t(4948),m=N(Object(o.useState)(!1),2),p=m[0],f=m[1],Object(o.useEffect)(function(){var e=new Image;e.onload=function(){return f(!0)},e.src=s},[s]),p),_=j(),y=_.unreadAnnouncements,A=_.resetUnreadAnnouncements,w=_.tacoStyle,E=X(x(),2),S=E[0],M=E[1],T=Object(o.useCallback)(function(){M(),h(),Object(l.trackUe)({category:l.Noun.HEADER,verb:l.Verb.OPENS,directObj:l.Noun.ANNOUNCEMENTS,context:{type:"Roo",interestingAnnouncementCount:y.length}})},[y,h,M]),I=r.Hidden;v&&y.length>0?I=r.Up:v&&S&&(I=r.Crouched);var U=w===a.Maintenance?K("maintenance"):K("new stuff"),P=O()((Q(e={},k.a.button,!0),Q(e,k.a.rooHidden,I===r.Hidden),Q(e,k.a.rooUp,I===r.Up),Q(e,k.a.rooCrouch,I===r.Crouched),e)),Z=O()((Q(n={},k.a.rooText,!0),Q(n,k.a.rooAlert,w===a.Maintenance),n)),B=O()((Q(u={},k.a.leftArrow,!0),Q(u,k.a.rooAlert,w===a.Maintenance),u));return i.a.createElement("div",{className:k.a.container},i.a.createElement("button",{className:P,ref:g,onClick:T,hidden:I===r.Hidden},i.a.createElement("span",{className:k.a.rooIcon}),i.a.createElement("span",{className:Z},i.a.createElement("span",{className:B}),i.a.createElement("span",null,U))),i.a.createElement(c.Popover,J({},b,{title:Y("announcements")}),i.a.createElement("div",{className:k.a.popoverContent},i.a.createElement(q,{announcements:y,onDismissAnnouncements:A}))))}}}]);
//# sourceMappingURL=taco-announcements.7d57b1f4d46f15545650.js.map